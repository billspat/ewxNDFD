# Welcome to ewxNDFD

ewxNDFD is a Python package to work with National Digital Forecast Database 
(NDFD) gridded weather forecast specifically for the MSU Enviroweather / 
Michigan Ag Weather Network (MAWN) databases.  This codebase is a "proof of 
concept" that will ultimately be integrated into the main data process project
'ewx_utils' usd for building QC databases. 

This is the successor to programs named 'fcst' and uses data generated by the
NDFD_auto_3.0 developed by Dr. M. Kiefer 

## Get started

This is a development package meant for internal use.  

## Development and building

This POC uses the "hatch" python project management tool which in turn uses uv

- install hatch (see website)
- clone this package 
- cd to ewxndfd directory
- to use in other code, build using `hatch build` which will create a wheel file in the dist/ directory
- to contribute/edit code, try running `hatch run test:pytest` which should create  
  a virtual environment named 'test' and run pytest in that environment.
- tests require access to sample data, which are not included in this repository. 
  The location of there example files is currently hardcoded in the text code, along with the expected dates to check
  based on the files present.   
  Current setup: Copy NDFD CSV files (in ndfd_auto format) matching *_20251119*.csv 
  (for example `maxr_20251119t00.csv` ) into a directory /tests/ndfd_sample_files 



## Example usage

To use ewxndfd in your code, build as above, then install the wheel file in your 
target environment using pip using the latest `*.whl` file in the dist/ directory. 
For example:

 `pip install dist/ewxndfd-0.0.1-py3-none-any.whl`

Once installed can be used if you know the path the NDFD gridded forecast data.

```python
path_to_ndfd = "/data/some/place/ndfd"
from ewxndfd import NDFD, DAILY_NDFD_VARIABLE_TYPES 
# show variable names available
print(DAILY_NDFD_VARIABLE_TYPES)
# get 7 day forecast for min temperature for all possible enviroweather stations
# create NDFD object
n = NDFD(path_to_ndfd, variable_type="mint")
ndfd_data = n.get_forecast()
#print 10 rows
print(ndfd_data[0:10])
# convert to long format as a first step in importing into a database
# this is a work in progress and API/syntax will change! 
mint_fcst = n._wide_to_long(ndfd_data)
print(mint_fcst[0:10])
``` 

## Copyright

- Copyright Â© 2025 MSU Trustees
- Free software distributed under the [MIT License](./LICENSE).
